Feature: Test
  As a James user
  I want to access to the download endpoint

  Background:
    Given a domain named "domain.tld"
    And some users "usera@domain.tld", "userb@domain.tld", "userc@domain.tld"
    And "usera@domain.tld" has a mailbox "INBOX"
    And "usera@domain.tld" mailbox "INBOX" contains a message "m1" with an attachment "a1"
    

  Scenario: S1
    Given "usera@domain.tld" is trusted for attachment "a1"
    When "usera@domain.tld" downloads "a1" with wrong blobId
    Then the user should not be authorized

  Scenario: S2
    Given "usera@domain.tld" is trusted for attachment "a1"
    When "usera@domain.tld" downloads "a1" with wrong blobId
    Then the user should not be authorized
    
  Scenario: S3
    Given "usera@domain.tld" is trusted for attachment "a1"
    When "usera@domain.tld" downloads "a1" with wrong blobId
    Then the user should not be authorized
    
  Scenario: S4
    Given "usera@domain.tld" is trusted for attachment "a1"
    When "usera@domain.tld" downloads "a1" with wrong blobId
    Then the user should not be authorized
    
  Scenario: S5
    Given "usera@domain.tld" is trusted for attachment "a1"
    When "usera@domain.tld" downloads "a1" with wrong blobId
    Then the user should not be authorized
    
  Scenario: S6
    Given "usera@domain.tld" is trusted for attachment "a1"
    When "usera@domain.tld" downloads "a1" with wrong blobId
    Then the user should not be authorized
    
  Scenario: S7
    Given "usera@domain.tld" is trusted for attachment "a1"
    When "usera@domain.tld" downloads "a1" with wrong blobId
    Then the user should not be authorized
    
  Scenario: S8
    Given "usera@domain.tld" is trusted for attachment "a1"
    When "usera@domain.tld" downloads "a1" with wrong blobId
    Then the user should not be authorized
    
  Scenario: S9
    Given "usera@domain.tld" is trusted for attachment "a1"
    When "usera@domain.tld" downloads "a1" with wrong blobId
    Then the user should not be authorized
    
  Scenario: S10
    Given "usera@domain.tld" is trusted for attachment "a1"
    When "usera@domain.tld" downloads "a1" with wrong blobId
    Then the user should not be authorized
    
  Scenario: S11
    Given "usera@domain.tld" is trusted for attachment "a1"
    When "usera@domain.tld" downloads "a1" with wrong blobId
    Then the user should not be authorized
    
  Scenario: S12
    Given "usera@domain.tld" is trusted for attachment "a1"
    When "usera@domain.tld" downloads "a1" with wrong blobId
    Then the user should not be authorized
    
  Scenario: S13
    Given "usera@domain.tld" is trusted for attachment "a1"
    When "usera@domain.tld" downloads "a1" with wrong blobId
    Then the user should not be authorized
    
  Scenario: S14
    Given "usera@domain.tld" is trusted for attachment "a1"
    When "usera@domain.tld" downloads "a1" with wrong blobId
    Then the user should not be authorized
    
  Scenario: S15
    Given "usera@domain.tld" is trusted for attachment "a1"
    When "usera@domain.tld" downloads "a1" with wrong blobId
    Then the user should not be authorized
    
  Scenario: S16
    Given "usera@domain.tld" is trusted for attachment "a1"
    When "usera@domain.tld" downloads "a1" with wrong blobId
    Then the user should not be authorized
    
  Scenario: S17
    Given "usera@domain.tld" is trusted for attachment "a1"
    When "usera@domain.tld" downloads "a1" with wrong blobId
    Then the user should not be authorized
    
  Scenario: S18
    Given "usera@domain.tld" is trusted for attachment "a1"
    When "usera@domain.tld" downloads "a1" with wrong blobId
    Then the user should not be authorized
    
  Scenario: S19
    Given "usera@domain.tld" is trusted for attachment "a1"
    When "usera@domain.tld" downloads "a1" with wrong blobId
    Then the user should not be authorized
    
  Scenario: S20
    Given "usera@domain.tld" is trusted for attachment "a1"
    When "usera@domain.tld" downloads "a1" with wrong blobId
    Then the user should not be authorized
    
  Scenario: S21
    Given "usera@domain.tld" is trusted for attachment "a1"
    When "usera@domain.tld" downloads "a1" with wrong blobId
    Then the user should not be authorized
    
  Scenario: S22
    Given "usera@domain.tld" is trusted for attachment "a1"
    When "usera@domain.tld" downloads "a1" with wrong blobId
    Then the user should not be authorized
    
  Scenario: S23
    Given "usera@domain.tld" is trusted for attachment "a1"
    When "usera@domain.tld" downloads "a1" with wrong blobId
    Then the user should not be authorized
    
  Scenario: S24
    Given "usera@domain.tld" is trusted for attachment "a1"
    When "usera@domain.tld" downloads "a1" with wrong blobId
    Then the user should not be authorized
    
  Scenario: S25
    Given "usera@domain.tld" is trusted for attachment "a1"
    When "usera@domain.tld" downloads "a1" with wrong blobId
    Then the user should not be authorized
    
  Scenario: S26
    Given "usera@domain.tld" is trusted for attachment "a1"
    When "usera@domain.tld" downloads "a1" with wrong blobId
    Then the user should not be authorized
    
  Scenario: S27
    Given "usera@domain.tld" is trusted for attachment "a1"
    When "usera@domain.tld" downloads "a1" with wrong blobId
    Then the user should not be authorized
    
  Scenario: S28
    Given "usera@domain.tld" is trusted for attachment "a1"
    When "usera@domain.tld" downloads "a1" with wrong blobId
    Then the user should not be authorized
    
  Scenario: S29
    Given "usera@domain.tld" is trusted for attachment "a1"
    When "usera@domain.tld" downloads "a1" with wrong blobId
    Then the user should not be authorized
    